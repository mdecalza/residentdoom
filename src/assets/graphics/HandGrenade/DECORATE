//Weapon: Hand Grenade
//By: Froon

ACTOR HandGrenade : Weapon 25099
{
   Inventory.PickupMessage "You got a hand grenade!"
   Weapon.AmmoType "HandGrenadeAmmo"
   Weapon.AmmoGive 1
   Weapon.AmmoUse 1
   Weapon.AmmoType2 "ThrowPower" 
   Weapon.AmmoGive2 0 
   Weapon.AmmoUse2 0 
   +NOALERT
   States
   {
   Spawn:
      PGRN D -1
      Loop
   Ready: 
      HNDG A 1 A_WeaponReady
      Loop
   Deselect:
      NULL A 0 A_JumpIfInventory("HandGrenadeAmmo",1,2)
      NULL A 1 A_Lower
      Loop 
      HNDG A 1 A_Lower 
      Loop
   Select:
      HNDG A 0 A_TakeInventory("ThrowPower",999) 
      HNDG A 1 A_Raise
      Loop
   Fire:
      HNDG A 0 A_JumpIfInventory("ThrowPower",1,9)
      HNDG BCD 2
      HNDG E 2 A_PlaySound("weapons/grnpullpin")
      HNDG FGHH 2
      NULL A 2 A_GiveInventory("ThrowPower",1)
      NULL A 0 A_Refire
      HNDG I 2 A_PlaySound("weapons/grntoss") 
      HNDG A 0 A_JumpIfInventory("ThrowPower",30,30)
      HNDG A 0 A_JumpIfInventory("ThrowPower",29,30)
      HNDG A 0 A_JumpIfInventory("ThrowPower",28,30)
      HNDG A 0 A_JumpIfInventory("ThrowPower",27,30)
      HNDG A 0 A_JumpIfInventory("ThrowPower",26,30)
      HNDG A 0 A_JumpIfInventory("ThrowPower",25,30)
      HNDG A 0 A_JumpIfInventory("ThrowPower",24,30)
      HNDG A 0 A_JumpIfInventory("ThrowPower",23,30)
      HNDG A 0 A_JumpIfInventory("ThrowPower",22,30)
      HNDG A 0 A_JumpIfInventory("ThrowPower",21,30)
      HNDG A 0 A_JumpIfInventory("ThrowPower",20,30)
      HNDG A 0 A_JumpIfInventory("ThrowPower",19,30)
      HNDG A 0 A_JumpIfInventory("ThrowPower",18,30)
      HNDG A 0 A_JumpIfInventory("ThrowPower",17,30)
      HNDG A 0 A_JumpIfInventory("ThrowPower",16,30)
      HNDG A 0 A_JumpIfInventory("ThrowPower",15,30)
      HNDG A 0 A_JumpIfInventory("ThrowPower",14,30)
      HNDG A 0 A_JumpIfInventory("ThrowPower",13,30)
      HNDG A 0 A_JumpIfInventory("ThrowPower",12,30)
      HNDG A 0 A_JumpIfInventory("ThrowPower",11,30)
      HNDG A 0 A_JumpIfInventory("ThrowPower",10,30)
      HNDG A 0 A_JumpIfInventory("ThrowPower",9,30)
      HNDG A 0 A_JumpIfInventory("ThrowPower",8,30)
      HNDG A 0 A_JumpIfInventory("ThrowPower",7,30)
      HNDG A 0 A_JumpIfInventory("ThrowPower",6,30)
      HNDG A 0 A_JumpIfInventory("ThrowPower",5,30)
      HNDG A 0 A_JumpIfInventory("ThrowPower",4,30)
      HNDG A 0 A_JumpIfInventory("ThrowPower",3,30)
      HNDG A 0 A_JumpIfInventory("ThrowPower",2,30)
      HNDG A 0 A_JumpIfInventory("ThrowPower",1,30) 
      
      HNDG J 0 A_FireCustomMissile("ThrownGrenade30",0,1,0,0)
      Goto Fire +72
      HNDG J 0 A_FireCustomMissile("ThrownGrenade29",0,1,0,0)
      Goto Fire +72
      HNDG J 0 A_FireCustomMissile("ThrownGrenade28",0,1,0,0)
      Goto Fire +72
      HNDG J 0 A_FireCustomMissile("ThrownGrenade27",0,1,0,0)
      Goto Fire +72
      HNDG J 0 A_FireCustomMissile("ThrownGrenade26",0,1,0,0)
      Goto Fire +72
      HNDG J 0 A_FireCustomMissile("ThrownGrenade25",0,1,0,0)
      Goto Fire +72
      HNDG J 0 A_FireCustomMissile("ThrownGrenade24",0,1,0,0)
      Goto Fire +72
      HNDG J 0 A_FireCustomMissile("ThrownGrenade23",0,1,0,0)
      Goto Fire +72
      HNDG J 0 A_FireCustomMissile("ThrownGrenade22",0,1,0,0)
      Goto Fire +72
      HNDG J 0 A_FireCustomMissile("ThrownGrenade21",0,1,0,0)
      Goto Fire +72
      HNDG J 0 A_FireCustomMissile("ThrownGrenade20",0,1,0,0)
      Goto Fire +72
      HNDG J 0 A_FireCustomMissile("ThrownGrenade19",0,1,0,0)
      Goto Fire +72
      HNDG J 0 A_FireCustomMissile("ThrownGrenade18",0,1,0,0)
      Goto Fire +72
      HNDG J 0 A_FireCustomMissile("ThrownGrenade17",0,1,0,0)
      Goto Fire +72
      HNDG J 0 A_FireCustomMissile("ThrownGrenade16",0,1,0,0)
      Goto Fire +72
      HNDG J 0 A_FireCustomMissile("ThrownGrenade15",0,1,0,0)
      Goto Fire +72
      HNDG J 0 A_FireCustomMissile("ThrownGrenade14",0,1,0,0)
      Goto Fire +72
      HNDG J 0 A_FireCustomMissile("ThrownGrenade13",0,1,0,0)
      Goto Fire +72
      HNDG J 0 A_FireCustomMissile("ThrownGrenade12",0,1,0,0)
      Goto Fire +72
      HNDG J 0 A_FireCustomMissile("ThrownGrenade11",0,1,0,0)
      Goto Fire +72
      HNDG J 0 A_FireCustomMissile("ThrownGrenade10",0,1,0,0)
      Goto Fire +72
      HNDG J 0 A_FireCustomMissile("ThrownGrenade9",0,1,0,0)
      Goto Fire +72
      HNDG J 0 A_FireCustomMissile("ThrownGrenade8",0,1,0,0)
      Goto Fire +72
      HNDG J 0 A_FireCustomMissile("ThrownGrenade7",0,1,0,0)
      Goto Fire +72
      HNDG J 0 A_FireCustomMissile("ThrownGrenade6",0,1,0,0)
      Goto Fire +72
      HNDG J 0 A_FireCustomMissile("ThrownGrenade5",0,1,0,0)
      Goto Fire +72
      HNDG J 0 A_FireCustomMissile("ThrownGrenade4",0,1,0,0)
      Goto Fire +72
      HNDG J 0 A_FireCustomMissile("ThrownGrenade3",0,1,0,0)
      Goto Fire +72
      HNDG J 0 A_FireCustomMissile("ThrownGrenade2",0,1,0,0)
      Goto Fire +72
      HNDG J 0 A_FireCustomMissile("ThrownGrenade1",0,1,0,0)
      Goto Fire +72  
      
      HNDG J 0 A_PlaySound("weapons/grntoss")
      HNDG JKLMNOPQ 2
      HNDG A 0 A_TakeInventory("ThrowPower",999)
      NULL A 12 A_CheckReload
      HNDG XWVUTS 1
      
      Goto Ready
   
   }
}

ACTOR HandGrenadeAmmo : Ammo
{
   Inventory.Amount 1
   Inventory.MaxAmount 25
   Ammo.BackpackAmount 1
   Ammo.BackpackMaxAmount 50
   Inventory.PickupMessage "You should not see this message, the weapon is the ammo"
   Inventory.Icon PGRND0
   Scale 0.5
   States
   {
   Spawn:
      NULL D -1
      Loop
   }
}

ACTOR ThrowPower : Ammo
{
   Inventory.MaxAmount 30
   Ammo.BackpackMaxAmount 30
   Inventory.Icon THROW
}

ACTOR ThrownGrenade1
{
   Radius 5
   Height 5
   Speed 1
   Damage 10
   Scale 0.3
   SeeSound "weapons/grnbounce"
   
   PROJECTILE
   -NOGRAVITY
   +HEXENBOUNCE
   +LOWGRAVITY
   States
   {
   Spawn:
      HGRN A 0
      HGRN A 4 A_AlertMonsters
      HGRN BCDEFABCDEFABCDEF 4
      Goto Death
   Death:
      HGRN G 0 A_PlaySound("weapons/grnexplode")
      HGRN G 0 A_Explode
      HGRN GHIJ 3 Bright
      Stop
   }
}


ACTOR ThrownGrenade2 : ThrownGrenade1
{
   Speed 2
}

ACTOR ThrownGrenade3 : ThrownGrenade1
{
   Speed 3
}

ACTOR ThrownGrenade4 : ThrownGrenade1
{
   Speed 4
}

ACTOR ThrownGrenade5 : ThrownGrenade1
{
   Speed 5
}

ACTOR ThrownGrenade6 : ThrownGrenade1
{
   Speed 6
}

ACTOR ThrownGrenade7 : ThrownGrenade1
{
   Speed 7
}

ACTOR ThrownGrenade8 : ThrownGrenade1
{
   Speed 8
}

ACTOR ThrownGrenade9 : ThrownGrenade1
{
   Speed 9
}

ACTOR ThrownGrenade10 : ThrownGrenade1
{
   Speed 10
}

ACTOR ThrownGrenade11 : ThrownGrenade1
{
   Speed 11
}

ACTOR ThrownGrenade12 : ThrownGrenade1
{
   Speed 12
}

ACTOR ThrownGrenade13 : ThrownGrenade1
{
   Speed 13
}

ACTOR ThrownGrenade14 : ThrownGrenade1
{
   Speed 14
}

ACTOR ThrownGrenade15 : ThrownGrenade1
{
   Speed 15
}

ACTOR ThrownGrenade16 : ThrownGrenade1
{
   Speed 16
}

ACTOR ThrownGrenade17 : ThrownGrenade1
{
   Speed 17
}

ACTOR ThrownGrenade18 : ThrownGrenade1
{
   Speed 18
}

ACTOR ThrownGrenade19 : ThrownGrenade1
{
   Speed 19
}

ACTOR ThrownGrenade20 : ThrownGrenade1
{
   Speed 20
}

ACTOR ThrownGrenade21 : ThrownGrenade1
{
   Speed 21
}

ACTOR ThrownGrenade22 : ThrownGrenade1
{
   Speed 22
}

ACTOR ThrownGrenade23 : ThrownGrenade1
{
   Speed 23
}

ACTOR ThrownGrenade24 : ThrownGrenade1
{
   Speed 24
}

ACTOR ThrownGrenade25 : ThrownGrenade1
{
   Speed 25
}

ACTOR ThrownGrenade26 : ThrownGrenade1
{
   Speed 26
}

ACTOR ThrownGrenade27 : ThrownGrenade1
{
   Speed 27
}

ACTOR ThrownGrenade28 : ThrownGrenade1
{
   Speed 28
}

ACTOR ThrownGrenade29 : ThrownGrenade1
{
   Speed 29
}

ACTOR ThrownGrenade30 : ThrownGrenade1
{
   Speed 30
}
