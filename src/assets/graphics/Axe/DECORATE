ACTOR Axe : Weapon
{
	+WEAPON.MELEEWEAPON
	+WEAPON.NOALERT
	Inventory.Icon "AXEPA0"
	Inventory.PickupMessage "You claimed yourself a powerful axe!"
	Tag "Axe"
	Obituary "%k butchered %o with his axe!"
	States
	{
	Spawn:
		AXEP A -1
		Stop
	Select:
		AXEG AAAAAAAAAA 0 A_Raise //To get it to raise
		TNT1 A 6
		AXEG EDCBA 2
		Goto Ready
	Deselect:
		TNT1 A 0 A_TakeInventory("AxeCharge", 0x7FFFFFFF)
		AXEG ABCDE 2
		TNT1 A 6
		AXEG A 0 A_Lower
		Wait
	Ready:
		AXEG A 1 A_WeaponReady
		loop
	Fire:
		AXEG ABCDE 3
		TNT1 A 4
		AXEG I 2 A_PlaySound("weapons/axeswing", CHAN_WEAPON)
		AXEG A 0 A_JumpIfInventory("PowerStrength", 1, "ToughFire")
		AXEG J 2 A_CustomPunch(20+random(4, 16), 1, 0, "AxeHitPuff")
		AXEG K 2
		TNT1 A 4
		AXEG EDCBA 2
		AXEG A 6
		Goto Ready
	ToughFire:
		AXEG J 2 A_CustomPunch(60+random(4, 16), 1, 0, "AxeHitPuff")
		Goto Fire+9
	AltFire:
		AXEG ABCDE 3
		TNT1 A 8
		TNT1 A 0 A_GiveInventory("AxeCharge", 9)
	AltHold:
		AXEG F 2 A_GiveInventory("AxeCharge", 1)
		TNT1 A 0 A_Refire
		AXEG G 3
		AXEG H 3 A_PlaySound("weapons/axeswing", CHAN_WEAPON)
		AXEG I 2
		AXEG A 0 A_JumpIfInventory("PowerStrength", 1, "AltFireHitBerserk")
		AXEG J 2 A_CustomPunch(56 * CallACS("Axe charge") * 0.1 + random(4, 14), 1, 0, "AxeHitPuff")
		Goto AltFireEnd
	AltFireHitBerserk:
		AXEG J 2 A_CustomPunch(112 * CallACS("Axe charge") * 0.1 + random(4, 20), 1, 0, "AxeHitPuff")
	AltFireEnd:
		AXEG K 2
		TNT1 A 8
		AXEG EDCBA 3
		Goto Ready
	}
}

ACTOR AxeHitPuff : BulletPuff
{
  +PUFFONACTORS
  //+NOEXTREMEDEATH --Uncomment and remove this message to prevent gibs
  SeeSound "weapons/axecut"
  AttackSound "weapons/axebang"
  ActiveSound "silent"
  States
  {
  Spawn:
    PUFF ABCD 4
    Stop
  }
}

ACTOR AxeCharge : Inventory
{
  Inventory.MaxAmount 30 // [Blue Shadow] A maximum of 3x the damage when fully charged
}